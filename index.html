<!DOCTYPE html>
<html>
<head>
  <title>Medicine Sales App</title>
</head>
<body>
  <!-- LOGIN SECTION -->
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Username"><br>
  <input type="password" id="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
  <p id="loginMessage"></p>

  <hr>

  <!-- SALES DATA SECTION -->
  <h2>Sales Data</h2>
  <button onclick="loadSalesData()">Load Data</button>
  <ul id="salesList"></ul>

  <script>
    // âœ… YOUR BACKEND URL
    const API_URL = "https://script.google.com/macros/s/AKfycbzFW4E0x7v77EzpFC6_A5iUIZbOhVKUdG5R5Fufdv2kiisO-pY-Tg4mn88gDJ5gzzfdxw/exec";

    function login() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;

      fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ username, password })
      })
      .then(res => res.json())
      .then(data => {
        document.getElementById("loginMessage").textContent = data.message;
      })
      .catch(err => {
        document.getElementById("loginMessage").textContent = "Error: " + err.message;
      });
    }

    function loadSalesData() {
      fetch(API_URL + "?functionName=getMedicineSalesData")
        .then(res => res.json())
        .then(data => {
          const list = document.getElementById("salesList");
          list.innerHTML = "";
          data.data.forEach(item => {
            const li = document.createElement("li");
            li.textContent = `${item.medicine} - Qty: ${item.quantity}, Revenue: $${item.revenue}`;
            list.appendChild(li);
          });
        })
        .catch(err => {
          alert("Error loading data: " + err.message);
        });
    }
  </script>
</body>
</html>
