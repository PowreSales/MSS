function doGet(e) {
  try {
    const params = e.parameter;
    const functionName = params.functionName;
    if (functionName === 'getMedicineSalesData') {
      const data = getMedicineSalesData();
      return ContentService.createTextOutput(
        JSON.stringify({ success: true, data })
      ).setMimeType(ContentService.MimeType.JSON);
    }
    return ContentService.createTextOutput(
      JSON.stringify({ success: false, message: 'Invalid function name' })
    ).setMimeType(ContentService.MimeType.JSON);
  } catch (error) {
    return ContentService.createTextOutput(
      JSON.stringify({ success: false, message: 'Error: ' + error.message })
    ).setMimeType(ContentService.MimeType.JSON);
  }
}

function doPost(e) {
  try {
    const data = JSON.parse(e.postData.contents);
    const { username, password } = data;
    // Replace with your authentication logic
    if (username === 'admin' && password === 'MgrPass2025!') {
      return ContentService.createTextOutput(
        JSON.stringify({ success: true, message: 'Login successful' })
      ).setMimeType(ContentService.MimeType.JSON);
    }
    return ContentService.createTextOutput(
      JSON.stringify({ success: false, message: 'Invalid credentials' })
    ).setMimeType(ContentService.MimeType.JSON);
  } catch (error) {
    return ContentService.createTextOutput(
      JSON.stringify({ success: false, message: 'Error: ' + error.message })
    ).setMimeType(ContentService.MimeType.JSON);
  }
}

function getMedicineSalesData() {
  // Replace with your data retrieval logic (e.g., from Google Sheets)
  return [
    { id: 1, medicine: 'Paracetamol', quantity: 100, revenue: 500 },
    { id: 2, medicine: 'Ibuprofen', quantity: 50, revenue: 300 }
  ];
}
